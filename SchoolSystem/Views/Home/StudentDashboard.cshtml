@{
	Layout = "~/Views/Shared/_ChatLayout.cshtml";
}

<div class="layout">
	<h2 class="heading-text">Dashboard</h2>
</div>

<div class="dashboard-container">
	<div class="student-bio">
		<div class="student-info">
			<div class="student-name">
				<p class="text-dashboard">Welcome, @Model.StudentName</p>
			</div>
			<div class="tutor">
				<p class="text-dashboard">Personal Tutor: @Model.PersonalTutor</p>
			</div>
		</div>
	</div>

	<div class="document-bio">
		<h4>Recent Uploaded Documents</h4>
		@{
			// Cast Model.Documents to a strongly-typed collection to avoid dynamic issues
			var documents = Model.Documents as IEnumerable<Document>;
		}
		@if (documents?.Any() == true)
		{
			<ul>
				@foreach (var document in documents.OrderByDescending(d => d.UploadDate))
				{
					<li>
						<h5>You have uploaded a new document</h5>
						@* <h5>@(document.Title ?? "Untitled")</h5> *@
						<p><small>Uploaded on: @(document.UploadDate.ToString("g") ?? "Unknown Date") by @(document.User?.Name ?? "Unknown")</small></p>
						@* <p><small>Uploaded by: @(document.User?.Name ?? "Unknown")</small></p> *@
					</li>
				}
			</ul>
		}
		else
		{
			<p>No documents available.</p>
		}
	</div>

	<div class="message-bio">
		<div class="message-info">
			<div class="message">
				<p class="text-dashboard text-bold">Recent Messages</p>
				@foreach (var message in Model.RecentMessages)
				{
					<p>@message.TextContent</p>
				}

			</div>
		</div>
	</div>


	<div class="blog-bio">
		<div class="blog-info">
			<div class="blog-name">
				<p class="text-dashboard text-bold">Student Blogs</p>
				@foreach (var blog in Model.StudentBlogs)
				{
					<li>
						<h5>You have uploaded a new blog</h5>
						@* <p><small>Posted on @blog.TimeStamp </small></p> *@
						<p><small>Posted on @blog.TimeStamp.ToString("g") by @blog.User.Name</small></p>

					</li>
				}
			</div>
		</div>
	</div>

	<div class="blog-bio">
		<div class="blog-info">
			<div class="blog-name">
				<p class="text-dashboard text-bold">Tutor Blogs</p>
				@foreach (var blog in Model.TutorBlogs)
				{
					<li>
						<h5>You have received a new blog</h5>
						<p><small>Posted on @blog.TimeStamp.ToString("g") by @blog.User.Name</small></p>
					</li>
				}
			</div>
		</div>
	</div>

	<div class="comment-bio">
		<div class="comment-info">
			<div class="blog-comment mt-6">
				<p class="text-dashboard text-bold">Blog Comments</p>
				@foreach (var comment in Model.BlogComments)
				{
					<li>
						<h5>You have received a new comment</h5>
						<p>
							Commented on @comment.TimeStamp.ToString("g") by @(comment.User?.Name ?? "Unknown")
						</p>
					</li>
				}
			</div>
		</div>
	</div>

	<div class="group-bio">
		<div class="group-info">
			<div class="group-name">
				<p class="text-dashboard text-bold">Group</p>
				@foreach (var group in Model.Groups)
				{
					<li>
						<h5>You have been assigned to a new group</h5>
						<p><small>Group ID: @group.Id</small></p>
					</li>
				}
			</div>
		</div>
	</div>
</div>


<script>
	document.addEventListener("DOMContentLoaded", function() {
		const menuItems = document.querySelectorAll(".menu-item");

		menuItems.forEach(item => {
			if (item.getAttribute("data-name") === "dashboard") {
				item.classList.add("active");
			}
		});
	});
</script>


